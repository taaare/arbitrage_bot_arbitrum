const ethers = require('ethers');
const fs = require('fs');
(async () => {
  // Deploy the contract to Ethereum test network - Ropsten
  const provider = new ethers.providers.InfuraProvider('arbitrum');

  // Use your wallet's private key to deploy the contract
  const privateKey = '242e75c0d3bb2988208cbf84725a6d95de58f2f4c60254909c4581452718da66'
  const wallet = new ethers.Wallet(privateKey, provider)

  // Read the contract artifact, which was generated by Remix
  const metadata = JSON.parse(fs.readFileSync('UniswapFlashQuery.json').toString())

  // Set gas limit and gas price, using the default Ropsten provider

  // Deploy the contract
  const factory = new ethers.ContractFactory(metadata.abi, "0x608060405234801561001057600080fd5b506112f0806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806326e942d4146100465780634dbf0f3914610076578063ab2217e4146100a6575b600080fd5b610060600480360381019061005b919061095b565b6100d6565b60405161006d9190610a80565b60405180910390f35b610090600480360381019061008b9190610b07565b610258565b60405161009d9190610cae565b60405180910390f35b6100c060048036038101906100bb9190610cd0565b61044b565b6040516100cd9190610e56565b60405180910390f35b606060008267ffffffffffffffff8111156100f4576100f3610e78565b5b6040519080825280602002602001820160405280156101225781602001602082028036833780820191505090505b50905060005b8381101561024b5760008773ffffffffffffffffffffffffffffffffffffffff16631698ee8288886101f46040518463ffffffff1660e01b815260040161017193929190610f0a565b602060405180830381865afa15801561018e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101b29190610f56565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161461023757808383815181106101fc576101fb610f83565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250505b50808061024390610fe1565b915050610128565b5080915050949350505050565b606060008383905067ffffffffffffffff81111561027957610278610e78565b5b6040519080825280602002602001820160405280156102b257816020015b61029f61083b565b8152602001906001900390816102975790505b50905060005b84849050811015610440578484828181106102d6576102d5610f83565b5b90506020020160208101906102eb9190611067565b73ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b8152600401606060405180830381865afa158015610335573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103599190611116565b826dffffffffffffffffffffffffffff169250816dffffffffffffffffffffffffffff1691508063ffffffff16905084848151811061039b5761039a610f83565b5b60200260200101516000600381106103b6576103b5610f83565b5b602002018585815181106103cd576103cc610f83565b5b60200260200101516001600381106103e8576103e7610f83565b5b602002018686815181106103ff576103fe610f83565b5b602002602001015160026003811061041a57610419610f83565b5b60200201838152508381525083815250505050808061043890610fe1565b9150506102b8565b508091505092915050565b606060008473ffffffffffffffffffffffffffffffffffffffff1663574f2ba36040518163ffffffff1660e01b8152600401602060405180830381865afa15801561049a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104be919061117e565b9050808311156104cc578092505b8383101561050f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161050690611208565b60405180910390fd5b6000848461051d9190611228565b905060008167ffffffffffffffff81111561053b5761053a610e78565b5b60405190808252806020026020018201604052801561057457816020015b61056161085d565b8152602001906001900390816105595790505b50905060005b8281101561082d5760008873ffffffffffffffffffffffffffffffffffffffff16631e3dd18b838a6105ac919061125c565b6040518263ffffffff1660e01b81526004016105c8919061129f565b602060405180830381865afa1580156105e5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106099190610f56565b90508073ffffffffffffffffffffffffffffffffffffffff16630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa158015610656573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061067a9190610f56565b83838151811061068d5761068c610f83565b5b60200260200101516000600381106106a8576106a7610f83565b5b602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508073ffffffffffffffffffffffffffffffffffffffff1663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa15801561072a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061074e9190610f56565b83838151811061076157610760610f83565b5b602002602001015160016003811061077c5761077b610f83565b5b602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050808383815181106107c7576107c6610f83565b5b60200260200101516002600381106107e2576107e1610f83565b5b602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505050808061082590610fe1565b91505061057a565b508093505050509392505050565b6040518060600160405280600390602082028036833780820191505090505090565b6040518060600160405280600390602082028036833780820191505090505090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006108b482610889565b9050919050565b60006108c6826108a9565b9050919050565b6108d6816108bb565b81146108e157600080fd5b50565b6000813590506108f3816108cd565b92915050565b610902816108a9565b811461090d57600080fd5b50565b60008135905061091f816108f9565b92915050565b6000819050919050565b61093881610925565b811461094357600080fd5b50565b6000813590506109558161092f565b92915050565b600080600080608085870312156109755761097461087f565b5b6000610983878288016108e4565b945050602061099487828801610910565b93505060406109a587828801610910565b92505060606109b687828801610946565b91505092959194509250565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6109f7816108a9565b82525050565b6000610a0983836109ee565b60208301905092915050565b6000602082019050919050565b6000610a2d826109c2565b610a3781856109cd565b9350610a42836109de565b8060005b83811015610a73578151610a5a88826109fd565b9750610a6583610a15565b925050600181019050610a46565b5085935050505092915050565b60006020820190508181036000830152610a9a8184610a22565b905092915050565b600080fd5b600080fd5b600080fd5b60008083601f840112610ac757610ac6610aa2565b5b8235905067ffffffffffffffff811115610ae457610ae3610aa7565b5b602083019150836020820283011115610b0057610aff610aac565b5b9250929050565b60008060208385031215610b1e57610b1d61087f565b5b600083013567ffffffffffffffff811115610b3c57610b3b610884565b5b610b4885828601610ab1565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600060039050919050565b600081905092915050565b6000819050919050565b610ba981610925565b82525050565b6000610bbb8383610ba0565b60208301905092915050565b6000602082019050919050565b610bdd81610b80565b610be78184610b8b565b9250610bf282610b96565b8060005b83811015610c23578151610c0a8782610baf565b9650610c1583610bc7565b925050600181019050610bf6565b505050505050565b6000610c378383610bd4565b60608301905092915050565b6000602082019050919050565b6000610c5b82610b54565b610c658185610b5f565b9350610c7083610b70565b8060005b83811015610ca1578151610c888882610c2b565b9750610c9383610c43565b925050600181019050610c74565b5085935050505092915050565b60006020820190508181036000830152610cc88184610c50565b905092915050565b600080600060608486031215610ce957610ce861087f565b5b6000610cf7868287016108e4565b9350506020610d0886828701610946565b9250506040610d1986828701610946565b9150509250925092565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600060039050919050565b600081905092915050565b6000819050919050565b6000602082019050919050565b610d8581610d4f565b610d8f8184610d5a565b9250610d9a82610d65565b8060005b83811015610dcb578151610db287826109fd565b9650610dbd83610d6f565b925050600181019050610d9e565b505050505050565b6000610ddf8383610d7c565b60608301905092915050565b6000602082019050919050565b6000610e0382610d23565b610e0d8185610d2e565b9350610e1883610d3f565b8060005b83811015610e49578151610e308882610dd3565b9750610e3b83610deb565b925050600181019050610e1c565b5085935050505092915050565b60006020820190508181036000830152610e708184610df8565b905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610eb0816108a9565b82525050565b6000819050919050565b600062ffffff82169050919050565b6000819050919050565b6000610ef4610eef610eea84610eb6565b610ecf565b610ec0565b9050919050565b610f0481610ed9565b82525050565b6000606082019050610f1f6000830186610ea7565b610f2c6020830185610ea7565b610f396040830184610efb565b949350505050565b600081519050610f50816108f9565b92915050565b600060208284031215610f6c57610f6b61087f565b5b6000610f7a84828501610f41565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610fec82610925565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361101e5761101d610fb2565b5b600182019050919050565b6000611034826108a9565b9050919050565b61104481611029565b811461104f57600080fd5b50565b6000813590506110618161103b565b92915050565b60006020828403121561107d5761107c61087f565b5b600061108b84828501611052565b91505092915050565b60006dffffffffffffffffffffffffffff82169050919050565b6110b781611094565b81146110c257600080fd5b50565b6000815190506110d4816110ae565b92915050565b600063ffffffff82169050919050565b6110f3816110da565b81146110fe57600080fd5b50565b600081519050611110816110ea565b92915050565b60008060006060848603121561112f5761112e61087f565b5b600061113d868287016110c5565b935050602061114e868287016110c5565b925050604061115f86828701611101565b9150509250925092565b6000815190506111788161092f565b92915050565b6000602082840312156111945761119361087f565b5b60006111a284828501611169565b91505092915050565b600082825260208201905092915050565b7f73746172742063616e6e6f7420626520686967686572207468616e2073746f70600082015250565b60006111f26020836111ab565b91506111fd826111bc565b602082019050919050565b60006020820190508181036000830152611221816111e5565b9050919050565b600061123382610925565b915061123e83610925565b925082820390508181111561125657611255610fb2565b5b92915050565b600061126782610925565b915061127283610925565b925082820190508082111561128a57611289610fb2565b5b92915050565b61129981610925565b82525050565b60006020820190506112b46000830184611290565b9291505056fea2646970667358221220a50c09e9b94bfee41a5d2a4c9d55d913825eca0c2b12cb584e495fcf628e4d5864736f6c63430008110033", wallet)
  const UniswapFlashQuery = await factory.deploy()
  await UniswapFlashQuery.deployed()
  console.log(`Deployment successful! Contract Address: ${UniswapFlashQuery.address}`)
})()